<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Webcam Grid 4x4</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #111;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
      gap: 1rem;
      width: 90vw;
      height: 90vh;
    }
    .cell {
      background: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative; /* required for overlay */
    }
    video, img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    video {
      filter: grayscale(1);
    }

    /* Noise overlay only on webcam cell */
    /* .cell.webcam::after {
      content: "";
      position: absolute;
      inset: 0;
      background: url("https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXN0MWpieHc3bWRkZDJtdTZpdzNzbW9sMGI3MXg3OWFmOGp4ODVxYSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/lCkumTggV53xe/giphy.gif") repeat;
      opacity: 0.25; 
      mix-blend-mode: overlay; 
      pointer-events: none;
    } */
  </style>
</head>
<body>
  <div class="grid" id="grid"></div>

  <script>
    const grid = document.getElementById('grid');
    const totalCells = 16;

    // Example PNG list (replace with your real files)
    const pngs = [
      "pngs/IMG_1495.png",
      "pngs/IMG_1544.png",
      "pngs/IMG_1564.png",
      "pngs/IMG_1569.png",
      "pngs/IMG_1607.png"
    ];

    // create 16 slots
    for (let i = 0; i < totalCells; i++) {
      const div = document.createElement('div');
      div.classList.add('cell');
      grid.appendChild(div);
    }

    // pick a random slot for webcam
    const randomIndex = Math.floor(Math.random() * totalCells);
    const targetCell = grid.children[randomIndex];
    targetCell.classList.add('webcam'); // mark webcam slot

    // create video element inside target slot
    const video = document.createElement('video');
    video.autoplay = true;
    video.playsInline = true;
    targetCell.appendChild(video);

    // fill other cells with PNGs
    for (let i = 0; i < totalCells; i++) {
      if (i === randomIndex) continue; // skip webcam cell
      const img = document.createElement('img');
      img.src = pngs[i % pngs.length]; // cycle through images
      grid.children[i].appendChild(img);
    }

    // ask for webcam
    async function startWebcam() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      } catch (err) {
        console.error('Error accessing webcam:', err);
        targetCell.textContent = 'Camera error';
      }
    }

    startWebcam();
  </script>
</body>
</html>
